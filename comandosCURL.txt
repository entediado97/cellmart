
PS C:\Users\geek_> mongosh
Current Mongosh Log ID: 66f222202df15b3843c73bf7
Connecting to:          mongodb://127.0.0.1:27017/?directConnection=true&serverSelectionTimeoutMS=2000&appName=mongosh+2.3.1
Using MongoDB:          8.0.0
Using Mongosh:          2.3.1

For mongosh info see: https://www.mongodb.com/docs/mongodb-shell/


To help improve our products, anonymous usage data is collected and sent to MongoDB periodically (https://www.mongodb.com/legal/privacy-policy).
You can opt-out by running the disableTelemetry() command.

------
   The server generated these startup warnings when booting
   2024-09-23T23:09:15.735-03:00: Access control is not enabled for the database. Read and write access to data and configuration is unrestricted
------

test> show dbs
admin   40.00 KiB
config  12.00 KiB
local   72.00 KiB
test> show dbs
admin     40.00 KiB
cellmar   40.00 KiB
config   108.00 KiB
local     72.00 KiB
test> use cellmar
switched to db cellmar
cellmar> show collections
carrinhos
contatos
produtos
usuarios
cellmar> db.produtos.find().pretty()

cellmar> db.usuarios.find({ email: "admin@admin.com" }).pretty()
[
  {
    _id: ObjectId('66f22e7398394b9a087a216e'),
    nome: 'Admin',
    email: 'admin@admin.com',
    senha: '$2a$10$mzZTUGmsL9Hkw4B1Z9QHzuofgCKyC0s2dUWjxRpKVzXZLz1yTkAmK',
    telefone: '99999999999',
    cpf: '00000000000',
    isAdmin: true,
    dataCriacao: ISODate('2024-09-24T03:13:55.969Z'),
    createdAt: ISODate('2024-09-24T03:13:55.975Z'),
    updatedAt: ISODate('2024-09-24T03:13:55.975Z'),
    __v: 0
  }
]
cellmar>

-----------------------------------------------
PS C:\Users\geek_\OneDrive\Documentos\trabalhoSMD\loja-onlineSMD\backend> node
Welcome to Node.js v20.10.0.
Type ".help" for more information.
> const bcrypt = require('bcryptjs');
undefined
> console.log(bcrypt.hashSync('admin123', 10));
$2a$10$SnZ3acQESDh0Uv47y0RwmeZEnZ1.Cglz3h2z/D5bCCE4dFP5MYyxC
undefined
>
------------------------------------------------

cellmar> db.usuarios.updateOne(
...   { email: "admin@admin.com" },
...   { $set: { senha: "$2a$10$SnZ3acQESDh0Uv47y0RwmeZEnZ1.Cglz3h2z/D5bCCE4dFP5MYyxC" } }
... )
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}
cellmar>
-------------------------------------------------
Autenticação do usuario admin possibilitando pega o token 

C:\Users\geek_>curl -X POST http://localhost:5000/api/auth/login -H "Content-Type: application/json" -d "{\"email\": \"admin@admin.com\", \"senha\": \"admin123\"}"
{"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2ZjIyZTczOTgzOTRiOWEwODdhMjE2ZSIsImlzQWRtaW4iOnRydWUsImlhdCI6MTcyNzE1MTgwNiwiZXhwIjoxNzI3MTU1NDA2fQ.P9DzmraGbhPJ0B1AYxJTYR0unrtJFrXwmVOlA6c38oI","isAdmin":true}
C:\Users\geek_>

-------------------------------------------------
Cadastrar ptoduto via api

C:\Users\geek_>curl -X POST http://localhost:5000/api/produtos ^
Mais? -H "Content-Type: application/json" ^
Mais? -H "x-auth-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2ZjIyZTczOTgzOTRiOWEwODdhMjE2ZSIsImlzQWRtaW4iOnRydWUsImlhdCI6MTcyNzE1MTgwNiwiZXhwIjoxNzI3MTU1NDA2fQ.P9DzmraGbhPJ0B1AYxJTYR0unrtJFrXwmVOlA6c38oI" ^
Mais? -d "{\"nome\": \"Huawei 2\", \"preco\": 2000, \"descricao\": \"Descrição do Produto 2\", \"categoria\": \"Categoria 1\", \"imagem\": \"https://img.freepik.com/vetores-gratis/vista-lateral-do-telefone-movel_23-2147698415.jpg\"}"
{"nome":"Huawei 1","preco":1050,"descricao":"Descrição do Produto 1","imagem":"https://img.freepik.com/vetores-gratis/vista-lateral-do-telefone-movel_23-2147698415.jpg","_id":"66f2403bb312952c390af37d","__v":0}
C:\Users\geek_>

--------------------------------------------------
Envio de mensagem via api com curl

C:\Users\geek_>curl -X POST http://localhost:5000/api/contato ^
Mais? -H "Content-Type: application/json" ^
Mais? -d "{\"nome\": \"João da Silva\", \"email\": \"joao.silva@example.com\", \"mensagem\": \"Estou interessado em saber mais sobre o seu produto.\"}"
{"message":"Mensagem enviada com sucesso"}
C:\Users\geek_>

--------------------------------------------------
Cadastro de usuario via api com curl

C:\Users\geek_>curl -X POST http://localhost:5000/api/auth/register ^
Mais? -H "Content-Type: application/json" ^
Mais? -d "{\"nome\": \"Usuário Comum\", \"email\": \"usuario1@comum.com\", \"senha\": \"senha123\", \"telefone\": \"11987654321\", \"cpf\": \"12345678900\"}"
{"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2ZjI0MzQ4YjMxMjk1MmMzOTBhZjM5ZCIsImlzQWRtaW4iOmZhbHNlLCJpYXQiOjE3MjcxNTI5NjgsImV4cCI6MTcyNzE1NjU2OH0.NEXDZ2CqQb0nWwCR_N312l-qMupXBxN5NYR7YF1HSIs","isAdmin":false}
C:\Users\geek_>


